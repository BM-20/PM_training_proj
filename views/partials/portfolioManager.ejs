<!-- Portfolios Section --> 
<h2 id="overviewTitle">Your Portfolios</h2>
<div class="row g-3" id="portfolioGrid">
  <% if (portfolios && portfolios.length > 0) { %>
    <% portfolios.forEach(p => { %>
      <div class="col-md-4">
        <div class="portfolio-card position-relative" onclick="openPortfolio('<%= p.id %>')">
          
          <!-- Delete button -->
          <button class="delete-btn position-absolute top-0 end-0 m-2" onclick="confirmDelete(event, '<%= p.id %>', '<%= p.name %>')">
            <i class='bx bx-trash'></i>
          </button>

          <h4 class="mt-2"><%= p.name %></h4>
          <p>Total Value: $<%= p.totalValue.toFixed(2) %></p>
          <p>Stocks: <%= p.stockCount %></p>

          <!-- Stock tickers as red boxes -->
          <div class="d-flex flex-wrap gap-2 mt-2 justify-content-center">
            <% if (p.tickers && p.tickers.length > 0) { %>
              <% p.tickers.forEach(ticker => { %>
                <span class="ticker-box"><%= ticker %></span>
              <% }) %>
            <% } else { %>
              <small class="text-muted">No stocks yet</small>
            <% } %>
          </div>

        </div>
      </div>
    <% }) %>
  <% } else { %>
    <div class="col-12">
      <p class="text-muted">You don't have any portfolios yet.</p>
    </div>
  <% } %>



  <!-- Create new portfolio block -->
  <div class="col-md-4">
    <div class="portfolio-card create-card" onclick="openCreatePortfolioModal()">
      <i class='bx bx-plus'></i>
      <p>Create Portfolio</p>
    </div>
  </div>
</div>

  <!-- Modal: Create Portfolio -->
  <div class="modal fade" id="createPortfolioModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-3">
        <h4 class="mb-3">Create New Portfolio</h4>
        <input type="text" id="portfolioName" placeholder="Portfolio Name" class="form-control mb-3">
        <div class="d-flex justify-content-between">
          <button class="btn btn-success" onclick="submitNewPortfolio()">Create</button>
          <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal: Delete Portfolio -->
<div class="modal fade" id="deletePortfolioModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content p-3">
      <h4 class="mb-3">Delete Portfolio</h4>
      <p id="deleteMessage"></p>
      <div class="d-flex justify-content-between">
        <button class="btn btn-danger" id="confirmDeleteBtn">Delete</button>
        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
      </div>
    </div>
  </div>
</div>

